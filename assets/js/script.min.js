function convert(){function a(){$("option").prop("disabled",!1),$.each(h,function(a,b){$('option[value="'+b+'"]').prop("disabled",!0)})}function b(){var c=d.clone();$("<li></li>").addClass("shop-li").insertBefore($("#recap-list")),$("li").last().append(c),console.log("new select"),c.each(function(){$(this).on("click",function(){"NULL"!=$("select").last().val()&&($('input[type="submit"]').prop("disabled",!1),b(),h=[],$("select").each(function(){"NULL"!=$(this).val()&&($("option").prop("disabled",!1),h.push($(this).val()))}),a())})})}var c=$("#form-list"),d=$("select"),e=$('input[type="checkbox"]'),f=[],g=[],h=[];$('.submit input[type="submit"]').prop("disabled",!0),e.each(function(){$(this).click(function(){1==$(this).is(":checked")?0==g.length?g.push($(this).val()):-1==$.inArray($(this).val(),g)&&g.push($(this).val()):-1!=$.inArray($(this).val(),g)&&g.splice($.inArray($(this).val(),g),1)})}),d.each(function(){$(this).on("click",function(){"NULL"!=$(this).val()&&($('input[type="submit"]').prop("disabled",!1),"NULL"!=$("select").last().val()&&(b(),h=[],$("select").each(function(){"NULL"!=$(this).val()&&($("option").prop("disabled",!1),h.push($(this).val()))}),a()))})}),c.on("submit",function(){return $("select").each(function(){var a=$(this).find("option:selected").text();f.push(a)}),$.ajax({url:"assets/json/list.json",type:"GET",dataType:"json",success:function(a){$(".list li").css("display","none");for(var b in a)for(var c in f)b==f[c]&&(g.length>0?-1!==$.inArray("Bio",g)&&-1!==$.inArray("Gluten-free",g)?"NULL"==a[b].BG?($("#recap-list").append("<li></li>"),$("li").last().after("Ce produit n'existe pas pour les filtres sélectionnés. Equivalent vegan de base : "+a[b].vegan+"<br>")):($("#recap-list").append("<li></li>"),$("li").last().addClass("result-li").append(a[b].BG+"<br>")):-1!==$.inArray("Bio",g)?($("#recap-list").append("<li></li>").addClass("result-li"),$("li").last().addClass("result-li").append(a[b].bio+"<br>")):-1!==$.inArray("Gluten-free",g)&&$("li").last().addClass("result-li").append(a[b].gluten+"<br>"):($("#recap-list").append("<li></li>").addClass("result-li"),$("li").last().addClass("result-li").append(a[b].vegan+"<br>")))},error:function(a,b,c){console.log(a,b,c)}}),!1})}function crush(){var a=document.querySelectorAll(".btn-crush"),b=!1;for(var c in a)a[c].onclick=function(){0==b?(this.src="assets/img/heart_red.png",b=!0):(this.src="assets/img/heart.png",b=!1)}}function modalActions(){function a(){d.style.overflow="hidden",e.classList.add("blur-elements"),f.classList.add("blur-elements"),g.classList.add("blur-elements");for(var a=0;a<h.length;a++)h[a].classList.add("blur-elements")}function b(){d.style.overflow="auto",e.classList.remove("blur-elements"),f.classList.remove("blur-elements"),g.classList.remove("blur-elements");for(var a=0;a<h.length;a++)h[a].classList.remove("blur-elements")}var c=document.querySelectorAll(".open-modal"),d=document.querySelector("body"),e=document.querySelector("header"),f=document.querySelector("#footer-mobile"),g=document.querySelector("#footer-desktop"),h=document.querySelectorAll(".blur");for(var i in c){c[i].onclick=function(){a()};document.querySelector(".btn-close").onclick=function(){b()}}}function listActions(){function a(){for(var a=document.querySelectorAll(".list select"),b=[],c="",d=0;d<a.length;d++){var e=a[d].options[a[d].selectedIndex].value;"NULL"!==e&&b.push(e)}for(var d=0;d<b.length;d++)d<b.length-1?c+=b[d]+",":c+=b[d];null!==c&&""!==c&&(h.value=c,g.style.display="flex",document.querySelector("body").style.overflow="hidden",document.querySelector("header").classList.add("blur-elements"),document.querySelector("main").classList.add("blur-elements"),document.querySelector("#footer-mobile").classList.add("blur-elements"),document.querySelector("#footer-desktop").classList.add("blur-elements"))}function b(){for(;d.firstChild;)d.removeChild(d.firstChild);var a=document.createElement("li");a.className="shop-li",d.appendChild(a),e.childNodes[1].value="NULL",a.appendChild(e)}var c=document.querySelector("#img-delete"),d=document.querySelector(".list ul"),e=document.querySelector(".list ul").childNodes[1],f=(document.querySelector("#recap-list"),document.querySelector("#img-pin")),g=document.forms["form-pin"],h=g.elements["list-content"],i=document.querySelector(".btn-close");f.onclick=function(){a()},i.onclick=function(){g.style.display="none",document.querySelector("body").style.overflow="auto",document.querySelector("header").classList.remove("blur-elements"),document.querySelector("main").classList.remove("blur-elements"),document.querySelector("#footer-mobile").classList.remove("blur-elements"),document.querySelector("#footer-desktop").classList.remove("blur-elements")},c.onclick=function(){b()}}function displaySavedList(){for(var a=document.querySelectorAll(".btn-see-list"),b=0;b<a.length;b++)a[b].onclick=function(){this.previousElementSibling.style.display="block",this.style.display="none"}}function anchor(){$(".category").on("click",function(){var a=$(this).attr("href");return $("html, body").animate({scrollTop:$(a).offset().top},750),!1}),$(".basket").on("click",function(){var a=$(this).attr("href");return $("html, body").animate({scrollTop:$(a).offset().top},750),!1})}function sortingRecipes(){var a=document.getElementById("filter-submit");document.getElementById("submit").onclick=function(){for(var b=document.getElementsByClassName("spotlight-recipe"),c=a.elements.myFilters,d=[],e=0;e<b.length;e+=1)b[e].style.display="none";for(e=0;e<c.length;e++)!0===c[e].checked&&d.push(c[e].value);for(var f=0;f<b.length;f+=1)for(var g=0;g<d.length;g+=1)b[f].classList.contains(d[g])&&(b[f].style.display="flex")}}function sortingBaskets(){for(var a=document.querySelectorAll(".desc_basket"),b=document.querySelectorAll(".category"),c=document.querySelector("#details"),d=document.querySelector(".click-basket-mobile"),e=document.querySelector(".click-basket-desktop"),f=0;f<a.length;f++)a[f].onclick=function(){var a=document.querySelectorAll(".ingredient"),b=this.getAttribute("id"),f=document.getElementsByClassName(b);c.style.display="flex",d.style.display="none",e.style.display="none";for(var g=0;g<a.length;g+=1)a[g].style.display="none";for(var g=0;g<f.length;g+=1)f[g].style.display="flex"};for(var g=0;g<b.length;g++)b[g].onclick=function(){for(var a=document.querySelectorAll(".ingredient"),b=document.querySelectorAll(".basket"),c=this.getAttribute("id"),d=document.getElementsByClassName(c),e=0;e<a.length;e+=1)a[e].style.display="none";for(var e=0;e<b.length;e+=1)b[e].style.display="none";for(var e=0;e<d.length;e+=1)d[e].style.display="flex"};$(".category").on("click",function(){var a=$(this).attr("href");return $("html, body").animate({scrollTop:$(a).offset().top},750),!1}),$(".basket").on("click",function(){var a=$(this).attr("href");return $("html, body").animate({scrollTop:$(a).offset().top},750),!1})}window.onload=function(){var a=window.location.href,b=document.querySelector("header"),c=document.querySelector("#convert-page"),d=document.querySelector("#basket-page"),e=document.querySelector("#recipe-page"),f=document.querySelector("#about-page");if(-1!==a.search("home")&&(b.id="header-home",convert(),listActions(),crush()),-1!==a.search("convert")&&(c.id="active-page",c.parentNode.childNodes[1].id="bookmark",b.id="header-convert",convert(),listActions()),-1!==a.search("basket")&&(d.id="active-page",d.parentNode.childNodes[1].id="bookmark",b.id="header-basket",anchor(),sortingBaskets()),-1!==a.search("recipe")&&(e.id="active-page",e.parentNode.childNodes[1].id="bookmark",b.id="header-recipe",modalActions(),sortingRecipes()),-1!==a.search("profile")){var g=document.querySelector("#modify-link"),h=document.querySelector("#pin-link"),i=document.querySelector("#favorites-link"),j=document.querySelector("#modify-content"),k=document.querySelector("#pin-content"),l=document.querySelector("#favorites-content");g.onclick=function(){location.reload()},h.onclick=function(){location.reload()},i.onclick=function(){location.reload()},-1!==a.search("pin")?(h.parentNode.id="active-tab",k.parentNode.id="active-content"):-1!==a.search("favorite")?(i.parentNode.id="active-tab",l.parentNode.id="active-content",modalActions()):(g.parentNode.id="active-tab",j.parentNode.id="active-content"),displaySavedList()}-1!==a.search("about")&&(f.id="active-page",f.parentNode.childNodes[1].id="bookmark",b.id="header-about"),-1!==a.search("modal")&&(b.id="header-modal")};