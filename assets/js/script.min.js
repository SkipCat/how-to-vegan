function getCurrentPage(a){console.log("in page function");var a=window.location.href,b=document.querySelector("#convert-page"),c=document.querySelector("#basket-page"),d=document.querySelector("#recipe-page"),e=document.querySelector("#about-page");-1!==a.search("convert")&&(b.id="active-page",document.querySelector("header").id="header-convert",console.log("convert")),-1!==a.search("basket")&&(c.id="active-page",document.querySelector("header").id="header-basket"),-1!==a.search("recipe")&&(d.id="active-page",document.querySelector("header").id="header-recipe"),-1!==a.search("profile")&&(e.id="active-page"),-1!==a.search("about")&&(e.id="active-page")}function convert(){function a(){$("option").prop("disabled",!1),$.each(h,function(a,b){$('option[value="'+b+'"]').prop("disabled",!0)})}function b(){var c=d.clone();$("<li></li>").addClass("shop-li").insertBefore($("#recap-list")),$("li").last().append(c),c.each(function(){$(this).on("click",function(){"NULL"!=$("select").last().val()&&($('input[type="submit"]').prop("disabled",!1),b(),h=[],$("select").each(function(){"NULL"!=$(this).val()&&($("option").prop("disabled",!1),h.push($(this).val()))}),a())})})}var c=$("#form-list"),d=$("select"),e=$('input[type="checkbox"]'),f=[],g=[],h=[];$('.submit input[type="submit"]').prop("disabled",!0),e.each(function(){$(this).click(function(){1==$(this).is(":checked")?0==g.length?g.push($(this).val()):-1==$.inArray($(this).val(),g)&&g.push($(this).val()):-1!=$.inArray($(this).val(),g)&&g.splice($.inArray($(this).val(),g),1)})}),d.each(function(){$(this).on("click",function(){"NULL"!=$(this).val()&&($('input[type="submit"]').prop("disabled",!1),"NULL"!=$("select").last().val()&&(b(),h=[],$("select").each(function(){"NULL"!=$(this).val()&&($("option").prop("disabled",!1),h.push($(this).val()))}),a()))})}),c.on("submit",function(){return $("select").each(function(){var a=$(this).find("option:selected").text();f.push(a)}),$.ajax({url:"assets/json/list.json",type:"GET",dataType:"json",success:function(a){$(".list li").css("display","none");for(var b in a)for(var c in f)b==f[c]&&(g.length>0?-1!==$.inArray("Bio",g)&&-1!==$.inArray("Gluten-free",g)?"NULL"==a[b].BG?($("#recap-list").append("<li></li>"),$("li").last().after("Ce produit n'existe pas pour les filtres sélectionnés. Equivalent vegan de base : "+a[b].vegan+"<br>")):($("#recap-list").append("<li></li>"),$("li").last().addClass("result-li").append(a[b].BG+"<br>")):-1!==$.inArray("Bio",g)?($("#recap-list").append("<li></li>").addClass("result-li"),$("li").last().addClass("result-li").append(a[b].bio+"<br>")):-1!==$.inArray("Gluten-free",g)&&$("li").last().addClass("result-li").append(a[b].gluten+"<br>"):($("#recap-list").append("<li></li>").addClass("result-li"),$("li").last().addClass("result-li").append(a[b].vegan+"<br>")))},error:function(a,b,c){console.log(a,b,c)}}),!1})}function listActions(){document.querySelector("#img-pin"),document.querySelector("#img-delete"),document.querySelector("#img-list-skip")}window.onload=function(){getCurrentPage(),convert(),listActions()};