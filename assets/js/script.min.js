function convert(){function a(){$("option").prop("disabled",!1),$.each(h,function(a,b){$('option[value="'+b+'"]').prop("disabled",!0)})}function b(){var c=d.clone();$("<li></li>").addClass("shop-li").insertBefore($("#recap-list")),$("li").last().append(c),console.log("new select"),c.each(function(){$(this).on("click",function(){"NULL"!=$("select").last().val()&&($('input[type="submit"]').prop("disabled",!1),b(),h=[],$("select").each(function(){"NULL"!=$(this).val()&&($("option").prop("disabled",!1),h.push($(this).val()))}),a())})})}var c=$("#form-list"),d=$("select"),e=$('input[type="checkbox"]'),f=[],g=[],h=[];$('.submit input[type="submit"]').prop("disabled",!0),e.each(function(){$(this).click(function(){1==$(this).is(":checked")?0==g.length?g.push($(this).val()):-1==$.inArray($(this).val(),g)&&g.push($(this).val()):-1!=$.inArray($(this).val(),g)&&g.splice($.inArray($(this).val(),g),1)})}),d.each(function(){$(this).on("click",function(){"NULL"!=$(this).val()&&($('input[type="submit"]').prop("disabled",!1),"NULL"!=$("select").last().val()&&(b(),h=[],$("select").each(function(){"NULL"!=$(this).val()&&($("option").prop("disabled",!1),h.push($(this).val()))}),a()))})}),c.on("submit",function(){return $("select").each(function(){var a=$(this).find("option:selected").text();f.push(a)}),$.ajax({url:"assets/json/list.json",type:"GET",dataType:"json",success:function(a){$(".list li").css("display","none");for(var b in a)for(var c in f)b==f[c]&&(g.length>0?-1!==$.inArray("Bio",g)&&-1!==$.inArray("Gluten-free",g)?"NULL"==a[b].BG?($("#recap-list").append("<li></li>"),$("li").last().after("Ce produit n'existe pas pour les filtres sélectionnés. Equivalent vegan de base : "+a[b].vegan+"<br>")):($("#recap-list").append("<li></li>"),$("li").last().addClass("result-li").append(a[b].BG+"<br>")):-1!==$.inArray("Bio",g)?($("#recap-list").append("<li></li>").addClass("result-li"),$("li").last().addClass("result-li").append(a[b].bio+"<br>")):-1!==$.inArray("Gluten-free",g)&&$("li").last().addClass("result-li").append(a[b].gluten+"<br>"):($("#recap-list").append("<li></li>").addClass("result-li"),$("li").last().addClass("result-li").append(a[b].vegan+"<br>")))},error:function(a,b,c){console.log(a,b,c)}}),!1})}function listActions(){function a(){for(;c.firstChild;)c.removeChild(c.firstChild);var a=document.createElement("li");a.className="shop-li",c.appendChild(a),d.childNodes[1].value="NULL",a.appendChild(d)}var b=(document.querySelector("#img-pin"),document.querySelector("#img-delete")),c=document.querySelector(".list ul"),d=document.querySelector(".list ul").childNodes[1];document.querySelector("#recap-list");b.onclick=function(){a()}}function crush(){var a=document.querySelectorAll(".btn-crush"),b=!1;for(var c in a)a[c].onclick=function(){console.log(this),0==b?(this.src="assets/img/heart_red.png",b=!0):(this.src="assets/img/heart.png",b=!1)}}function modalActions(){var a=document.querySelectorAll(".open-modal"),b=document.querySelector(".btn-close");for(var c in a)a[c].onclick=function(){document.querySelector("body").style.overflow="hidden",document.querySelector("header").classList.add("blur-elements"),document.querySelector("main").classList.add("blur-elements"),document.querySelector("#footer-mobile").classList.add("blur-elements"),document.querySelector("#footer-desktop").classList.add("blur-elements")};b.onclick=function(){document.querySelector("body").style.overflow="auto",document.querySelector("header").classList.remove("blur-elements"),document.querySelector("main").classList.remove("blur-elements"),document.querySelector("#footer-mobile").classList.remove("blur-elements"),document.querySelector("#footer-desktop").classList.remove("blur-elements")}}window.onload=function(){var a=window.location.href,b=document.querySelector("header"),c=document.querySelector("#convert-page"),d=document.querySelector("#basket-page"),e=document.querySelector("#recipe-page"),f=document.querySelector("#about-page");if(-1!==a.search("home")&&(b.id="header-home",convert(),listActions(),crush(),modalActions()),-1!==a.search("convert")&&(c.id="active-page",c.parentNode.childNodes[1].id="bookmark",b.id="header-convert",convert(),listActions()),-1!==a.search("basket")&&(d.id="active-page",d.parentNode.childNodes[1].id="bookmark",b.id="header-basket"),-1!==a.search("recipe")&&(e.id="active-page",e.parentNode.childNodes[1].id="bookmark",b.id="header-recipe",crush(),modalActions()),-1!==a.search("profile")){var g=document.querySelector("#modify-link"),h=document.querySelector("#pin-link"),i=document.querySelector("#favorites-link"),j=document.querySelector("#modify-content"),k=document.querySelector("#pin-content"),l=document.querySelector("#favorites-content");g.onclick=function(){location.reload()},h.onclick=function(){location.reload()},i.onclick=function(){location.reload()},-1!==a.search("pin")?(h.parentNode.id="active-tab",k.parentNode.id="active-content"):-1!==a.search("favorite")?(i.parentNode.id="active-tab",l.parentNode.id="active-content"):(g.parentNode.id="active-tab",j.parentNode.id="active-content")}-1!==a.search("about")&&(f.id="active-page",f.parentNode.childNodes[1].id="bookmark"),-1!==a.search("modal")&&(b.id="header-modal")};